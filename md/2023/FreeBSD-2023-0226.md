# krb5 -- Double-free in KDC TGS processing
The MIT krb5 Team reports:

> When issuing a ticket for a TGS renew or validate request, copy only
> the server field from the outer part of the header ticket to the new
> ticket. Copying the whole structure causes the enc_part pointer to be
> aliased to the header ticket until krb5_encrypt_tkt_part() is called,
> resulting in a double-free if handle_authdata() fails..


## Affected packages
 - **krb5**
    - **Introduced:** 1.20,1
    - **Fixed:** 1.21.1_1
 - **krb5-121**
    - **Fixed:** 1.21.1_1
 - **krb5-devel**
    - **Introduced:** 1.20,1
    - **Fixed:** 1.22.2023.08.07

## Details
 - **published**: 2023-08-14T00:00:00Z
 - **modified**: 2023-08-14T00:00:00Z
 - **discovery**: 2023-08-07T00:00:00Z
 - **vid**: [a6986f0f-3ac0-11ee-9a88-206a8a720317](https://vuxml.freebsd.org/freebsd/a6986f0f-3ac0-11ee-9a88-206a8a720317.html)

## References
 - REPORT: [https://github.com/krb5/krb5/commit/88a1701b423c13991a8064feeb26952d3641d840](https://github.com/krb5/krb5/commit/88a1701b423c13991a8064feeb26952d3641d840)
 - ADVISORY: [https://cveawg.mitre.org/api/cve/CVE-2023-39975](https://cveawg.mitre.org/api/cve/CVE-2023-39975)
