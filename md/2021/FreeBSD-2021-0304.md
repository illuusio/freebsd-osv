# graylog -- remote code execution in log4j from user-controlled log input
Apache Software Foundation reports:

> It was found that the fix to address CVE-2021-44228 in Apache Log4j
> 2.15.0 was incomplete in certain non-default configurations. This
> could allows attackers with control over Thread Context Map (MDC)
> input data when the logging configuration uses a non-default Pattern
> Layout with either a Context Lookup (for example, \$\${ctx:loginId})
> or a Thread Context Map pattern (%X, %mdc, or %MDC) to craft malicious
> input data using a JNDI Lookup pattern resulting in a denial of
> service (DOS) attack. Log4j 2.15.0 makes a best-effort attempt to
> restrict JNDI LDAP lookups to localhost by default. Log4j 2.16.0 fixes
> this issue by removing support for message lookup patterns and
> disabling JNDI functionality by default.


## Affected packages
 - **graylog**
    - **Fixed:** 4.2.4

## Details
 - **published**: 2021-12-17T00:00:00Z
 - **modified**: 2021-12-17T00:00:00Z
 - **discovery**: 2021-11-14T00:00:00Z
 - **vid**: [650734b2-7665-4170-9a0a-eeced5e10a5e](https://vuxml.freebsd.org/freebsd/650734b2-7665-4170-9a0a-eeced5e10a5e.html)

## References
 - REPORT: [https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/log4j/2.x/security.html)
 - ADVISORY: [https://api.osv.dev/v1/vulns/CVE-2021-45046](https://api.osv.dev/v1/vulns/CVE-2021-45046)
 - WEB: [https://github.com/Graylog2/graylog2-server/commit/d3e441f](https://github.com/Graylog2/graylog2-server/commit/d3e441f)
 - WEB: [https://github.com/Graylog2/graylog2-server/commit/dd24b85](https://github.com/Graylog2/graylog2-server/commit/dd24b85)
 - WEB: [https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/log4j/2.x/security.html)
